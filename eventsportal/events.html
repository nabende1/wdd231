<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Sedan+SC&family=Teachers:ital,wght@0,400..800;1,400..800&display=swap"
        rel="stylesheet">
    <title>Mbale Events Hub | Events</title>
    <meta name="description" content="WDD 231">
    <meta name="keywords" content="Brian Nabende, Web Developer, Resources, HTML, CSS, JavaScript, Frameworks">
    <meta name="author" content="Brian Nabende">
    <script src="scripts/script.js" defer></script>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/events.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
    <header>
        <div>
            <img class="logo" src="images/logo.png" alt="Logo" width="48" height="48">
            <h1>Mbale Events Hub</h1>
        </div>
        <button type="button" id="menu"></button>
        <nav class="navigation">
            <a href="index.html">Home</a>
            <a href="events.html" class="active">Events</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>
    <main class="events-page">
        <h2>Events</h2>
        <section id="events-container" class="events-container">
            <!-- Events will be dynamically loaded here -->
        </section>
        <h2>Submit Your Event</h2>
        <p>If you have an event to share, please fill out the <a href="#" id="submit-event-link">event submission
                form</a>.</p>
    </main>
    <!-- Modal Form -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Submit Event</h2>
            <form id="event-form">
                <label for="event-name">Event Name:</label>
                <input type="text" id="event-name" required>

                <label for="event-date">Event Date:</label>
                <input type="date" id="event-date" required>

                <label for="event-location">Location:</label>
                <input type="text" id="event-location" required>

                <label for="event-description">Description:</label>
                <textarea id="event-description" required></textarea>

                <button type="submit">Submit Event</button>
            </form>
            <p id="feedback" class="feedback"></p>
        </div>
    </div>

    <footer class="footer-container">
        <!-- Address Section -->
        <div class="footer-address">
            <h4>Mbale Events Hub</h4>
            <p>123 Republic Street, Mbale</p>
            <p>P.O. Box 456, Mbale, Uganda</p>
            <p>Phone: +256 123 456 789</p>
        </div>

        <!-- Social Media Section -->
        <div class="footer-social-media">
            <a href="https://facebook.com" target="_blank"><img src="images/facebook-icon.png" alt="Facebook"></a>
            <a href="https://twitter.com" target="_blank"><img src="images/twitter-icon.png" alt="Twitter"></a>
            <a href="https://instagram.com" target="_blank"><img src="images/instagram-icon.png" alt="Instagram"></a>
        </div>

        <!-- Author Section -->
        <div class="footer-author">
            <p>WDD Class Project</p>
            <p>Nabende Brian</p>
            <p>&copy; <span id="year"></span> Mbale Chamber of Commerce <br> Last Modified: <span
                    id="last-modified"></span></p>
        </div>
    </footer>

    <script src="js/events.js"></script>
</body>
<script defer>
    document.addEventListener("DOMContentLoaded", () => {
        const eventsContainer = document.getElementById("events-container");

        // Fetch events from JSON file
        fetch("data/events.json")
            .then(response => response.json())
            .then(data => {
                data.forEach(event => {
                    const eventCard = document.createElement("div");
                    eventCard.classList.add("event-card");

                    eventCard.innerHTML = `
                    <img src="${event.image}" alt="${event.title}" class="event-image">
                    <div class="event-details">
                        <h3 class="event-title">${event.title}</h3>
                        <p class="event-date-time">üìÖ ${event.date} | ‚è∞ ${event.time}</p>
                        <p class="event-location">üìç ${event.location}</p>
                        <p class="event-description">${event.description}</p>
                    </div>
                `;

                    eventsContainer.appendChild(eventCard);
                });
            })
            .catch(error => console.error("Error loading events:", error));
    });

    document.addEventListener("DOMContentLoaded", () => {
        const submitEventLink = document.getElementById("submit-event-link");
        const modal = document.getElementById("event-modal");
        const closeModal = document.querySelector(".close");
        const eventForm = document.getElementById("event-form");
        const feedback = document.getElementById("feedback");

        // Open modal when clicking on the submit event link
        submitEventLink.addEventListener("click", (e) => {
            e.preventDefault();
            modal.style.display = "block";
        });

        // Close modal when clicking on the close button
        closeModal.addEventListener("click", () => {
            modal.style.display = "none";
            feedback.textContent = ""; // Clear feedback on close
        });

        // Close modal when clicking outside the modal content
        window.addEventListener("click", (e) => {
            if (e.target === modal) {
                modal.style.display = "none";
                feedback.textContent = ""; // Clear feedback on close
            }
        });

        // Handle form submission
        eventForm.addEventListener("submit", (e) => {
            e.preventDefault();

            // Simulate a successful submission
            feedback.textContent = "Your event has been successfully submitted!";
            feedback.style.color = "#2972fb";

            // Clear the form after submission
            eventForm.reset();

            // Hide the modal after a short delay
            setTimeout(() => {
                modal.style.display = "none";
                feedback.textContent = ""; // Clear feedback for the next submission
            }, 2000);
        });
    });

</script>

</html>